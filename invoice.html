<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice Generator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 16px; }
    .container { max-width: 900px; margin: auto; }
    label { display: block; margin-top: 10px; }
    input, button { margin-top: 4px; margin-bottom: 8px; }
    table { width: 100%; border-collapse: collapse; margin: 16px 0; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f9f9f9; }
    .itemTotal, #grandTotal { text-align: right; }
    button { padding: 6px 14px; }
    @media (max-width: 600px) {
      .container { padding: 2px; }
      table, thead, tbody, th, td, tr { display: block; }
      th { position: absolute; left: -9999px; }
      tr { margin-bottom: 10px; }
      td { border: none; position: relative; padding-left: 50%; }
      td:before { position: absolute; left: 10px; top: 8px; white-space: nowrap; font-weight: bold; }
      td:nth-of-type(1):before { content: "Description"; }
      td:nth-of-type(2):before { content: "Quantity"; }
      td:nth-of-type(3):before { content: "Unit Price"; }
      td:nth-of-type(4):before { content: "Total"; }
      td:nth-of-type(5):before { content: "Action"; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Invoice Generator</h1>
    <form id="invoiceForm">
      <label for="clientName">Client Name:</label>
      <input id="clientName" name="clientName" type="text" placeholder="e.g. John Doe" required>

      <label for="clientEmail">Client Email:</label>
      <input id="clientEmail" name="clientEmail" type="email" placeholder="e.g. john@example.com" required>

      <label for="invoiceDate">Invoice Date:</label>
      <input id="invoiceDate" name="invoiceDate" type="date" required>

      <label for="dueDate">Due Date:</label>
      <input id="dueDate" name="dueDate" type="date">
    </form>
    <table id="lineItems" aria-label="Invoice line items">
      <caption>Invoice line items</caption>
      <thead>
        <tr>
          <th scope="col">Description</th>
          <th scope="col">Quantity</th>
          <th scope="col">Unit Price</th>
          <th scope="col">Total</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="text" placeholder="Service/Product" required aria-label="Description"></td>
          <td><input type="number" min="1" value="1" required aria-label="Quantity"></td>
          <td><input type="number" min="0" step="0.01" value="0.00" required aria-label="Unit Price"></td>
          <td class="itemTotal">0.00</td>
          <td><button type="button" class="deleteRowBtn" aria-label="Delete line item">Delete</button></td>
        </tr>
      </tbody>
    </table>
    <button type="button" id="addRowBtn">Add Line Item</button>
    <div>
      <strong>Grand Total: $<span id="grandTotal">0.00</span></strong>
    </div>
    <button type="button" id="downloadPDFBtn">Download PDF</button>
  </div>
  <script>
    // Update totals whenever input changes
    function updateTotals() {
      let grandTotal = 0;
      document.querySelectorAll("#lineItems tbody tr").forEach(row => {
        const qty = Number(row.children[1].querySelector("input").value) || 0;
        const price = Number(row.children[2].querySelector("input").value) || 0;
        const total = qty * price;
        row.querySelector(".itemTotal").textContent = total.toFixed(2);
        grandTotal += total;
      });
      document.getElementById("grandTotal").textContent = grandTotal.toFixed(2);
    }

    // Add a new line item row
    function addRow() {
      const tbody = document.querySelector("#lineItems tbody");
      const row = document.createElement("tr");
      row.innerHTML = `
        <td><input type="text" placeholder="Service/Product" required aria-label="Description"></td>
        <td><input type="number" min="1" value="1" required aria-label="Quantity"></td>
        <td><input type="number" min="0" step="0.01" value="0.00" required aria-label="Unit Price"></td>
        <td class="itemTotal">0.00</td>
        <td><button type="button" class="deleteRowBtn" aria-label="Delete line item">Delete</button></td>
      `;
      tbody.appendChild(row);
    }

    // Event listeners
    document.getElementById("addRowBtn").addEventListener("click", () => {
      addRow();
      updateTotals();
    });

    document.querySelector("#lineItems tbody").addEventListener("input", updateTotals);

    document.querySelector("#lineItems tbody").addEventListener("click", (e) => {
      if (e.target.classList.contains("deleteRowBtn")) {
        e.target.closest("tr").remove();
        updateTotals();
      }
    });

    document.getElementById("downloadPDFBtn").addEventListener("click", () => {
      alert('PDF generation not implemented in this snippet. Integrate jsPDF or similar.');
    });

    // Initial total update
    updateTotals();
  </script>
</body>
</html>
